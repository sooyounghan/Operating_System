-----
### 운영체제 이슈
-----
1. 동적 재배치 지원을 위해 하드웨어가 새로운 기능을 제공하는 것과 마찬가지로, 운영체제에도 새로운 이슈가 등장
   - 하드웨어 지원과 운영체제 관리가 결합되면 간단한 가상 메모리 구현 가능

2. 베이스와 바운드 방식의 가상 메모리 구현을 위해 운영체제가 반드시 개입되어야 하는 중요한 세 개의 시점
<div align="center">
<img src="https://github.com/user-attachments/assets/c0416c95-e5f6-4a8f-8efa-891f4cb10168">
</div>

   - 프로세스가 생성될 때 운영체제는 주소 공간이 저장될 메모리 공간을 찾아 조치를 취해야 함
     + 다행히 각 주소 공간은 물리 메모리 크기보다 작고, 크기가 일정하다는 가정하에 운영체제가 쉽게 처리 가능
     + 운영체제는 물리 메모리를 슬롯의 배열로 보고 각 슬롯의 사용 여부를 관리
     + 새로운 프로세스가 생성되면 운영체제는 새로운 주소 공간 할당에 필요 영역을 찾기 위해(빈 공간 리스트(Free-List)) 자료 구조를 검색해야 함
     + 검색을 통해 선택된 공간을 사용 중이라고 표시
     + 예시) 물리 메모리 첫 슬롯을 운영체제가 사용 : 운영체제는 프로세스의 위치를 물리 주소 32 KB에서 시작하는 슬롯으로 재배치하였음 (다른 두 슬롯 (16 ~ 32 KB, 48 ~ 64 KB)은 비어 있는데, 따라서 빈 공간 리스트는 이 두 항목으로 구성)

   - 프로세스가 종료할 때, 즉, 정상적으로 종료될 때 또는 잘못된 행동을 하여 강제적으로 죽게될 때 프로세스가 사용하던 메모리를 회수하여 다른 프로세스나 운영체제가 사용할 수 있게 해야 함
     + 프로세스가 종료하면, 운영체제는 종료한 프로세스의 메모리를 다시 빈 공간 리스트에 넣고, 연관된 자료 구조를 모두 정리

   - 운영체제는 문맥 교환이 일어날 때에도 몇 가지 추가 조치를 취해야 함
     + CPU 마다 한 쌍의 베이스-바운드 레지스터만 존재하고 각 프로그램은 다른 물리 주소에 탑재되어야 하므로 실행 중인 프로그램마다 다른 값을 가짐
     + 운영체제는 프로세스 전환 시 베이스와 바운드 쌍을 저장하고 복원해야 함
     + 운영체제가 실행 중인 프로세스를 중단시키기로 결정하면, 운영체제는 메모리에 존재하는 프로세스 별 자료 구조 안 베이스와 바운드 레지스터의 값을 저장해야 함
     + 이 자료 구조는 프로세스 구조체(Process Structure) 또는 프로세스 제어 블록(Process Control Block, PCB)라고 불림
     + 마찬가지로 운영체제는 실행 중인 프로세스를 다시 시작할 때 또는 처음 실행시킬 때, 이 프로세스에 맞는 값으로 CPU의 베이스와 바운드 값을 설정해야함
     + 프로세스가 중단(즉, 실행 상태가 아닐 때)되면, 운영체제는 메모리의 현 위치에서 다른 위치로 주소 공간을 비교적 쉽게 옮길 수 있는데, 프로세스의 주소 공간을 이동시키려면 운영체제는 먼저 프로세스 실행을 중지시킨 뒤, 운영체제는 현재 위치에서 새 위치로 주소 공간을 복사하며, 운영체제는 프로세스 구조체에 저장된 베이스 레지스터를 갱신해 새 위치를 가리키도록 함

   - 운영체제는 예외 핸들러 또는 호출될 함수를 제공해야 함
     + 운영체제는 부팅할 때 특권 명령어를 사용하여 핸들러를 설치
     + 예를 들어, 프로세스가 바운드 밖의 메모리에 접근하려는 경우 CPU는 예외를 발생
     + 운영체제는 이러한 예외가 발생할 때 조치를 취할 준비가 되어있어야 함

3. 하드웨어 / OS의 상호작용의 타임라인
<div align="center">
<img src="https://github.com/user-attachments/assets/c8579c98-775a-4543-91fd-455b97f63f12">
</div>

   - 부팅할 때 컴퓨터를 사용 가능한 상태로 만들기 위해 운영체제가 하는 역할을 보여줌
   - 프로세스(Process A)가 실행을 시작할 때 무슨 일이 일어나는지 보여줌
   - 💡 메모리 변환은 운영체제 개입없이 하드웨어에 의해 처리
   - 시간이 흐른 후 타이머 인터럽트가 발생하고 운영체제는 Process B로 전환
   - Process B는 불법적인 주소에 잘못된 탑재를 실행
   - 그 시점에 운영체제가 개입하여 프로세스를 끝낸 후 B의 메모리를 해제하고 프로세스 테이블에서 해당 항목을 제거하여 정리

