-----
### 캐시 관리
-----
1. 시스템의 전체 페이지들 중 일부분만이 메인 메모리에 유지된다는 것을 가정하면, 메인 메모리는 시스템의 가상 메모리 페이지를 가져다 놓기 위한 캐시로 생각될 수 있음
2. 이 캐시를 위한 교체 정책의 목표
   - 캐시 미스의 횟수를 최소화하는 것 (즉, 디스크로부터 페이지를 가져오는 횟수를 최소로 만드는 것)
   - 캐시 히트 횟수를 최대로 하는 것 (즉, 접근된 페이지가 메모리에 이미 존재하는 횟수를 최대로 하는 것)

3. 캐시 히트와 미스의 횟수를 안다면 프로그램의 평균 메모리 접근 시간(Average Memory Access Time, AMAT)을 계산할 수 있음 (컴퓨터 아키텍쳐가 캐시 성능 측정 시 사용하는 미터법)
<div align="center">
<img src="https://github.com/user-attachments/assets/552ed5f6-6f19-49d6-b861-9875c8853786">
</div>

   - $T_{M}$ : 메모리 접근 비용
   - $T_{D}$ : 디스크 접근 비용
   - $P_{Hit}$ : 캐시에서 데이터 항목을 찾을 확률 (히트)
   - $P_{Miss}$ : 캐시에서 데이터를 못찾을 확률 (미스)
   - $P_{Hit}$와 $P_{Miss}$는 각각 0.0에서 1.0까지의 값을 가지며 $P_{Hit} + P_{Miss} = 1.0$을 만족

4. 예) 어떤 컴퓨터가 4KB의 작은 메모리를 가지고 있고, 페이지 크기는 256바이트라고 가정
   - 가상 주소는 4비트 VPN(최상위 비트)와 8비트 오프셋(최하위 비트)의 두 부분으로 구성
   - 한 프로세스는 $2^{4}$ 또는 총 16개의 가상 페이지들에 접근할 수 있음
   - 프로세스는 가상 주소 0x000, 0x100, 0x200, 0x300, 0x400, 0x500, 0x600, 0x700, 0x800, 0x900의 메모리를 가리키고 있음
     + 이 가상 주소들은 주소 공간의 첫 열 개 페이지들의 첫 번째 바이트들을 나타냄 (각 가상 주소들의 첫 16진수 숫자가 페이지 번호를 나타냄)

   - 가상 페이지 3을 제외한 모든 페이지가 이미 메모리에 있다고 가정하면, 메모리 참조는 다음과 같은 동작 : 히트 / 히트 / 히트 / 미스 / 히트 / 히트 / 히트 / 히트 / 히트
     + 히트율(Hit Rate)을 (메모리에 참조 대상을 찾은 백분율) 게산하면 10개의 참조 중 9개가 메모리에 있으므로 90% ($P_{Hit}$ = 0.9)
     + 미스율(Miss Rate)은 10% ($P_{Miss}$ = 0.1)

   - AMAT를 계산하기 위해 메모리 접근 비용과 디스크 접근 비용을 알아야 함
     + 메모리 접근 비용($T_{M}$)이 약 100 nsec이고, 디스크를 접근하는 비용($T_{D}$)이 약 10 μsec라고 가정
     + AMAT = (0.9 * 100 ns) + (0.1 + 10 ms) = 1.0009 msec 혹은 1 μsec
     + 만약 히트율이 99.9%가 되면 결과는 달라지며, AMAT가 10.1 msec 혹은 대략 100배 이상 빨라짐
     + 히트율이 100%에 가까워질수록 AMAT는  100 msec에 가까워짐

5. 현대 시스템에서 디스크 접근 비용이 너무 크므로 아주 작은 미스가 발생하더라도 전체적인 AMAT에 큰 영향을 줌
   - 컴퓨터가 디스크 속도 수준으로 느리게 실행되는 것을 방지하기 위해 당연히 미스를 최대한 줄여야 함
