-----
### 페이지 테이블의 저장
-----
1. 페이지 테이블은 매우 커질 수 있음
   - 예를 들어, 4KB 크기의 페이지를 가지는 전형적인 32비트 주소 공간의 경우, 이 가상 주소는 20비트 VPN과 12비트 오프셋으로 구성 (1KB 페이지 크기를 위해 10비트가 필요, 4KB 페이지를 위해서는 2비트만 추가하면 됨)
   - 20비트 VPN은 운영체제가 각 프로세스를 위해 관리해야 하는 변환의 개수가 $2^{20}$이며, 물리 주소로의 변환 정보와 다른 필요한 정보를 저장하기 위해 페이지 테이블 항목(Page Table Entry, PTE) 마다 4바이트가 필요하다가 가정하면, 각 페이지 테이블을 저장하기 위해 4MB 메모리가 필요
   - 프로세스가 100개 실행 중이라면, 주소 변환을 위해 400MB 메모리를 필요로 하며, 이는 매우 큰 청크를 사용하는 것이므로 비정상적

2. 페이지 테이블이 매우 크므로 현재 실행 중인 페이지 테이블을 저장할 수 있는 회로를 MMU 안에 유지하지 않음
   - 대신 각 프로세스의 페이지 테이블을 메모리에 저장
   - 페이지 테이블은 운영체제 가상 메모리에 저장할 수 있고, 심지어 디스크에 스왑될 수 있음

3. 운영체제 메모리 영역(VPN 0)에 페이지 테이블이 존재
<div align="center">
<img src="https://github.com/user-attachments/assets/464059bd-c149-4f40-8fb4-00ef502cf735">
</div>

-----
### 페이지 테이블 구성 요소
-----
1. 페이지 테이블은 가상 주소(또는 실제로 가상 페이지 번호)를 물리 주소(물리 프레임 번호)로 매핑(Mapping)하는 데 사용되는 자료 구조 (임의의 자료 구조도 사용 가능하며, 가장 간단한 형태는 선형 페이지 테이블(Linear Page Table)로, 가장 단순한 배열이며 운영체제는 원하는 물리 프레임 번호(PFN)를 찾기 위해 가상 페이지 번호(VPN)로 배열의 항목에 접근하고 그 항목의 페이지 테이블 항목(PTE)을 검색)
2. 각 PTE에 필요한 비트
   - Vaild Bit : 특정 변환의 유효 여부를 나타내기 위해 포함 (예를 들어, 프로그램이 실행을 시작할 때 코드와 힙이 주소 공간의 한쪽에 있고, 반대 쪽에는 스택이 차지하고 있으므로, 그 사이 모든 미사용 공간은 무효(Valid)로 표시)
     + 프로세스가 그런 메모리에 접근하려고 한다면, 운영체제는 트랩을 발생시켜 그 프로세스를 종료시킬 수 있음
     + 즉, 할당되지 않은 주소 공간을 표현하기 위해 반드시 필요함
     + 주소 공간의 미사용 페이지를 모두 표시함으로써 이러한 페이지들에게 물리 프렝미을 할당할 필요를 없애 대량의 메모리를 절약

   - Protection Bit : 페이지가 읽을 수 있는지, 쓸 수 있는지, 또는 실행될 수 있는지 표시
     + 허용되지 않는 방식으로 페이지에 접근하려고 하면 운영체제에서 트랩 생성

   - Present Bit : 페이지가 물리 메모리에 있는지 혹은 디스크에 있는지(즉, 스왑 아웃) 가리킴 (물리 메모리보다 더 큰 주소 공간을 지원하기 위해 주소 공간 일부를 스왑하는 방법이 존재)
     + 스와핑은 운영체제가 드물게 사용되는 페이지를 디스크로 이동시켜 물리 메모리를 비울 수 있게 함
   - Dirty Bit : 메모리에 반입된 후 페이지가 변경되었는지 여부 확인
   - Reference Bit(Accessed Bit) : 떄때로 페이지가 접근되었는지를 추적하기 위해 사용
     + 어떤 페이지가 인기가 있는지 결정해 메모리에 유지되어야 하는 페이지를 결정할 때 유용
     + 페이지 교체에 매우 중요

3. x86 아키텍쳐의 페이지 테이블 항목
<div align="center">
<img src="https://github.com/user-attachments/assets/775c9f22-96d6-419d-8ff1-85b76ba49029">
</div>

   - Present Bit(P)
   - 페이지에 쓰기가 허용되는지 결정하는 읽기 / 쓰기 비트 (R / W)
   - 사용자 모드 프로세스가 페이지에 액세스할 수 있는지 결정하는 사용자 / 슈퍼바이저 비트 (U / S)
   - 페이지에 대한 하드웨어 캐시 동작을 결정하는 비트 (PWT, PCD, PAT, G)
   - Reference Bit(A)
   - Dirty Bit(D)
   - 페이지 프레임 번호(PFN) 자체
