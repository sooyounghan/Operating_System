-----
### 쓰레드 종료
-----
1. POSIX 쓰레드에서 다른 쓰레드를 완료를 기다리는 것은 pthread_join()을 부르는 것
```c
int pthread_join(pthread_t thread , void **value_ptr);
```

  - pthread_t 타입 인자 : 어떤 쓰레드를 기다리려고 하는지 명시
    + 이 변수는 쓰레드 생성 루틴에 의해 초기화 (자료 구조에 대한 포인터를 pthread_create()로 전달하여)
    + 이 구조체를 보관해 놓으면, 그 쓰레드가 끝나기를 기다릴 때 사용할 수 있음

  - 반환 값에 대한 포인터 : 루틴이 임의의 데이터 타이을 반환할 수 있기 때문에 void에 대한 포인터 타입으로 정의
    + pthread_join() 루틴은 전달된 인자의 값을 변경하기 때문에 값을 전달하는 것이 아닌 그 값에 대한 포인터를 전달해야 함

2. 예제
<div align="center">
<img src="https://github.com/user-attachments/assets/f5f3bcc7-585e-4dc3-b166-6daeff7931bf">
</div>

   - 쓰레드를 생성하여 myarg_t 데이터 타입을 통하여 2개의 인자를 전달
   - 반환 값으로 myarg_t 타입이 사용
   - 메인 쓰레드는 pthread_join() 루틴 안에서 기다리는 중이며, 쓰레드가 실행을 마치면 메인 쓰레드가 리턴하고, 종료한 쓰레드가 반환한 값, 즉 myret_t 안에 들어있는 무슨 값이든 접근할 수 있게 됨

3. 인자가 없는 쓰레드를 생성할 때는 NULL을 전달하여 쓰레드를 생성할 수 있음
   - 비슷한 예로 반환값이 필요 없다면 pthread_join()에 NULL을 전달할 수 있음

4. 값 하나만(예) int 값) 전달해야 한다면 인자를 전달하기 위해 묶을 필요가 없음
<div align="center">
<img src="https://github.com/user-attachments/assets/b37f0434-ba12-4c70-8b95-8fba2574c525">
</div>

   - 인자와 반환 값을 구조체로 묶을 필요가 없으므로 간단하게 할 수 있음

5. 쓰레드에서 값이 어떻게 반환되는지에 대한 각별한 신경을 써야 함
   - 특히, 쓰레드의 콜 스택에 할당된 값을 가리키는 포인터를 반환해서는 안 됨
<div align="center">
<img src="https://github.com/user-attachments/assets/9ec33db8-ad40-4147-a043-75262eeedc26">
</div>

   - 이 코드에서 mythread의 스택에 변수 r이 할당되어 있음
   - 이 값은 쓰레드가 리턴할 때 자동적으로 해제되며, 현재 해제된 변수를 가리키는 포인터를 반환하는 것은 온갖 종류의 좋지 않은 결과를 가져옴

6. pthread_create()를 사용하여 쓰레드를 생성하고 직후에 pthread_join()을 호출한다는 것은 쓰레드를 생성하는 방법
   - 프로시저 호출(Procedure Call) 이용 : 여러 개의 쓰레드를 생성해놓고 쓰레드가 끝나기를 기다리는 게 일반적
   - 모든 멀티 쓰레드 코드가 조인 루틴을 사용하지 않음
   - 예를 들면, 멀티 쓰레드 웹 서버의 경우 여러 개 작업자 쓰레드를 생성하고 메인 쓰레드를 이용하여 사용자 요청을 받아 작업자에게 전달하는 작업을 무한히 할 것
   - 이런 프로그램은 join을 사용할 필요가 없지만, 특정 작업을 병렬적으로 실행하기 위해 쓰레드는 생성하는 병렬 프로그램의 경우에는 종료 전 혹은 계산의 다음 단계로 넘어가기 전에 병렬 수행 작업이 모두 완료되었다는 것을 확인하기 위해 join() 사용
