-----
### Fetch-And-Add
-----
1. Fetch-And-Add 명령어로 원자적으로 특정 주소의 예전 값을 반환하면서 값을 증가시킴
2. Fetch-And-Add 명렁어의 C언어로 된 의사 코드
```c
1 int FetchAndAdd(int *ptr) {
2     int old = *ptr;
3     *ptr = old + 1;
4     return old;
5 }
```
<div align="center">
<img src="https://github.com/user-attachments/assets/d05c5d1b-64ec-4d84-9b9f-0ef9cb526b20">
</div>

   - 하나의 변수만을 사용하는 대신 티켓(Ticket)과 차례(Turn) 조합을 사용하여 락을 만듬
   - 기본 연산은 하나의 쓰레드가 락 획득을 원하면, 티켓 변수에 원자적 동작인 Fetch-And-Add 명령어를 실행
   - 결과 값은 해당 쓰레드의 차례(myturn)를 나타냄
     + 전역 공유 변수인 lock->turn을 사용하여 어느 쓰레드의 차례인지 판단
     + 만약 한 쓰레드가 (myturn == turn)이라는 조건에 부합하면 그 쓰레드가 임계 영역에 진입할 차례인 것
   - 언락 동작은 차례 변수의 값을 증가시켜서 대기 중인 다음 쓰레드에게 (만약 있다면) 임계 영역 진입 차례를 넘겨줌

2. 중요 차이점은 모든 쓰레드들이 각자의 순서에 따라 진행
   - 쓰레드가 티켓 값을 할당받았다면 미래 어느 때에 실행되기 위해 스케줄되어 있다는 것 (앞선 쓰레드들이 임계 영역을 지나가고 락을 해제한 후 실행되도록 스케줄)
   - 예를 들어, Test-And-Set의 경우 다른 쓰레드들은 락을 획득 / 해제하더라도 어떤 쓰레드는 여전히 계속 회전만 했었지만, 이 방법은 보장해줌
