-----
### 디스크 오류 모델
-----
1. 디스크는 완전하지 않으며 (때에 따라) 오류가 발생할 수 있음
   - 초기 RAID 시스템에서는 오류 모델이 간단한 편 : 디스크 전체가 동작하던가, 또는 완전히 불능이었으므로 그러한 오류를 단순하게 판단할 수 있었음
   - RAID 구현이 어렵지 않았던 것은 디스크의 실패-시-멈춤(Fail-Stop) 모델 때문임

2. 현대의 디스크들은 정상적으로 동작하는 것처럼 보이지만, 블럭들을 읽는 데 실패하는 경우가 존재
   - 구체적으로 빈번하게 발생하는 오류 중에 두 가지 오류가 중요
   - 숨어있는 섹터 에러(Latent Sector Error, LSE), 블럭 손상(Block Courrption)

3. 숨어있는 섹터 에러(Latent Sector Error, LSE)
   - 디스크 섹터(또는 섹터 그룹)가 어떤 이유로든 손상되었을 때 발생
   - 예를 들어, 디스크 헤드가 표면에 어떤 이유로 닿았다면(헤드 크래시(Head Crash)로, 일반적 상황에서는 일어나서는 안 됨) 표면을 망가뜨릴 것이고, 비트들을 읽을 수 없게 됨
   - 강한 방사선도 역시 비트를 반전시켜 내용을 부정확하게 만들 수 있음
   - 이는 디스크 내 에러 정정 코드(Error Correcting Codes, ECC)를 사용하여 디스크 상 있는 블럭의 비트가 괜찮은지 판단하고 어떤 경우에는 고치기도 함
   - 어떤 비트의 상태가 좋지 않은데 그 부분의 에러를 고칠 충분한 정보를 가지지 않았고, 그 때 해당 비트를 읽는 요청을 받으면 디스크는 에러를 반환
   - 디스크가 손상 여부를 인식할 수 없게 내용이 손상(Corrupt)된 경우로, 이 경우 해당 블럭의 내용은 읽혀짐
     + 예를 들어, 버그가 있는 디스크 펌웨어 때문에 잘못된 위치에 쓰기를 했을 수 있는데, 그 경우 디스크 ECC는 디스크의 내용이 정상이라고 표시하지만 사용자가 추후 해당 블럭을 읽었을 때, 잘못된 블럭이 리턴
     + 이전에 쓴 자료는 엉뚱한 곳에 기록되기 때문임
   - 마찬가지로 전송 버스 상에 오류로 인해서 호스트에서 디스크로 전송되는 도중에 블럭이 손상될 수 있음
     + 손상된 데이터가 디스크에 저장이 되면, 이는 원하는 결과가 아님
   - 이러한 종류의 오류들은 조용한 오류(Slient Fault)이기 때문에 심각 : 오류가 있는 데이터를 리턴함에도 불구하고, 디스크는 문제를 전혀 알리지 않음

4. 이런 현대적 관점의 디스크 오류를 부분-실패(Fail-Partial) 디스크 오류 모델이라고 부름
   - 이와 같은 관점에서 디스크는 전체적으로 불량으로 볼 수 있지만(고전적 Fail-Stop 모델과 동일) 한편으로는 몇 개 블럭이 접근이 안 되거나(LSE), 잘못된 내용(즉, 손상)을 갖고 있는 것을 제외하면 디스크가 동작하는 것처럼 보임
   - 그러므로 동작하는 것처럼 보이는 디스크를 사용할 때는, 가끔 주어진 블럭을 읽거나 쓸 때 에러를 리턴할 수 있으며(조용하지 않은 부분 오류) 가끔 잘못된 데이터를 리턴할 수 있음(조용한 부분 오류)

5. 두 종류의 오류는 정확히 얼마나 드물게 발생하는가?
<div align="center">
<img src="https://github.com/user-attachments/assets/ac2c516c-a803-479d-adb4-f140965ace64">
</div>

   - 관측 기간 동안 최소한 하나의 LSE 또는 블럭 손상이 보인 드라이브들의 백분율
   - 디스크 가격대에 따라 저가(일반적으로 SATA 드라이브) 또는 고가(대부분 SCSI 또는 광섬유채널 방식)으로 나누어 표현
   - 더 좋은 드라이브를 구매하는 것이 두 문제의 발생 빈도를 낮춘다는 것을 알 수 있음 (약 열배 정도)
   - 저장 시스템에서 이러한 경우를 다루는 방법을 생각해야할 만큼 충분히 많이 발생

6. LSE에 대한 현상
   - 하나 이상의 LSE를 갖고 있는 고가의 드라이브들은 저가의 드라이브들처럼 추가적 에러를 만들어냄
   - 대부분 드라이브들의 연간 에러율은 둘째 해에 줄어듬
   - LSE는 디스크의 크기에 비례해 증가
   - LSE를 갖고 있는 대부분 디스크는 50개 미만의 LSE를 갖고 있음
   - LSE를 갖고 있는 디스크들은 추가적인 LSE를 만들어낼 확률이 있음
   - 공간과 시간 지역성이 상당히 두드러짐
   - 디스크를 지우는 것이 유용(이것으로 대부분의 LSE를 발견할 수 있음)

7. 섹터 손상에 대한 특성 관찰
   - 같은 급의 드라이브들이라고 하더라도 모델에 따라 손상 확률 차이가 큼
   - 사용 연한에 따른 영향은 모델에 따라 다름
   - 워크로드와 디스크 크기는 섹터 손상 빈도에 큰 영향이 없음
   - 섹터 손상이 발생한 대부분 디스크는 단지 몇 개의 손상된 부분을 가지고 있음
   - RAID로 묶인 디스크들 간이나 하나의 디스크에 있는 손상은 독립적이지 않음
   - LSE는 연관성이 약함

   
