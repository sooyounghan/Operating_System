-----
### I/O 시간 계산
-----
1. 디스크의 성능을 구하는 공식 : 세 개의 항으로 이루어진 다음 식을 통해 I/O 시간 계산 가능
<div align="center">
<img src="https://github.com/user-attachments/assets/00691709-de6c-49d5-993d-c41289dd8f90">
</div>

2. 드라이브 간 비교를 쉽게 하기 위해 주로 사용되는 I/O 속도(Rate, $R_{I/O}$)는 시간을 이용해 다음 식처럼 나타낼 수 있음
<div align="center">
<img src="https://github.com/user-attachments/assets/ddcca646-48bd-4882-bc20-c20949461d34">
</div>

3. I/O 시간을 위한 예제
   - 두 개의 워크로드가 존재
   - 하나는 랜덤 워크로드 : 디스크에 4KB의 작은 읽기 요청이 발생 (랜덤 워크로드는 데이터베이스 관리 시스템과 같은 많은 중요 응용 프로그램에서 흔하게 사용)
   - 하나는 순차 워크로드 : 헤드의 이동 없이 디스크에 연속되어 있는 여러 개 섹터를 읽는 것 (순차 접근 패턴 역시 흔하므로 중요한 워크로드)
   - 디스크 드라이브에 대한 가정
     + Seagate사 디스크 : Cheetah 15K.5는 고성능 SCSCI 드라이브이며, 다른 하나는 용량을 위해 주로 쓰이는 Barracuda
<div align="center">
<img src="https://github.com/user-attachments/assets/b921cb10-298e-4bda-9188-ed3e9ef0b3bb">
</div>

   - 드라이브들은 상당히 다른 특성을 갖고 있고 디스크 드라이브 시장의 두 가지 중요 요소를 잘 요약
     + 하나는 고성능 드라이브 : 빠르게 회전하도록 설계되어서 낮은 탐색 시간과 빠른 데이터 전송 속도를 가짐
     + 하나는 용량 위주 : 바이트 당 가격이 중요한 측면이라 드라이브 속도는 낮지만 주어진 공간에 가능한 많은 비트 저장

4. 두 개의 워크로드가 얼마나 잘 동작하는지 계산 (랜덤 워크 로드)
   - 랜덤한 디스크 위치에서 4KB씩 읽기가 발생했다고 했을 때, 다음과 같이 계산 가능
<div align="center">
<img src="https://github.com/user-attachments/assets/5eb8af02-d7ed-4487-9003-d1bf11cc60a6">
</div>

   - 평균 탐색 시간 (4 ms)은 제조사가 명시하고 있는 평균 시간
     + 전체 탐색(표면의 한쪽 끝에서 반대편 끝까지 이동)은 대체로 두 배에서 세 배 가량 더 긴 시간이 필요
   - 평균 회전 지연은 RPM에서 직접적으로 계산 가능
     + 15,000 RPM은 250 RPS (초당 회전수)로 나타낼 수 있으며, 한 번 회전은 4 ms가 걸림
   - 전송 시간은 데이터 크기를 최대 전송 속도로 나눈 값 (여기서는 없는 것이나 다름없는 작은 값 (30 μs, 1000 μs가 있어야 1ms)
   - 위의 식에 따라 Cheetah의 $T_{I/O}$는 약 6ms가 되며, I/O 속도를 계산하기 위해 데이터 크기를 평균 시간으로 나눔
     + 랜덤 워크로드로 처리하는 Cheetah의 $R_{I/O}$는 0.66 MB/s
   - Barracuda도 같은 방식으로 계산하면, $T_{I/O}$는 약 13.2 ms로 두 배 이상 느리고 전송 속도는 0.31 MB/s

5. 두 개의 워크로드가 얼마나 잘 동작하는지 계산 (순차 워크 로드)
   - 아주 긴 전송 시간 전 한 번의 탐색과 회전이 있다고 가정
   - 데이터의 크기는 100 MB이라고 가정
   - Barracuda와 Cheetah의 $T_{I/O}$는 각각 800 ms와 950 ms가 되며, I/O 속도는 드라이브 최고 전송 속도인 125 MB/s, 105 MB/s와 거의 비슷하게 됨
<div align="center">
<img src="https://github.com/user-attachments/assets/b0d0266e-9958-421b-8ba0-ee2efc5d1c55">
</div>

6. 결론
   - 랜덤 워크로드와 순차 워크로드 드라이브 간 성능 차이는 큼
   - Cheetah의 경우 거의 200배 이상 차이가 나며, Barracuda의 경우 300배 이상 차이 발생
   - 성능 위주의 드라이브와 용량 위주의 드라이브 간 성능 차이가 상당히 큼

7. 참고 : 디스크를 순차적으로 사용할 것
   - 데이터를 디스크로 전송하거나 전송받을 때에는 가능하면 순차적 방식을 해야함
   - 순차적 전송이 불간으하면 최소한 큰 청크 단위로 데이터를 전송하는 방법을 생각해야 함
   - 청크의 크기가 클 수록 더 좋으며, 만약 I/O가 작은 임의의 크기 단위로 처리된다면, I/O 성능은 급격하게 나빠질 것
