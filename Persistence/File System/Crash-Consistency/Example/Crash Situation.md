-----
### 크래시 시나리오 - 한 번의 쓰기만 성공한 경우
-----
1. 한 번의 쓰기만 성공한 경우의 세 가지 경우가 존재할 수 있음
2. 데이터 블록(Db)만 디스크에 기록
   - 디스크에 잇지만 그것을 가리키고 있는 아이노드가 없으며 할당 여부를 나타내는 비트맵도 없음
   - 파일 시스템의 크래시 일관성 측면에서는 문제가 없음 (하지만, 데이터 일부를 잃었기 때문에 사용자에게는 문제가 될 수 있음)

3. 갱신된 아이노드(I[v2])만 디스크에 기록
   - 이 경우 Db가 기록되려던 디스크 주소(5)를 아이노드가 가리키고 있지만, 아직 Db는 그 자리에 기록되지 않음
   - 그러므로, 포인터를 그대로 읽는다면 디스크에서 의미없는 데이터를 얻게 됨 (기존 디스크 주소(5)에 있던 데이터)
   - 더 나아가 파일 시스템의 일관성 손상이라는 새로운 문제 발생
     + 디스크 상 비트맵은 데이터 블록 5번이 할당되어 있지 않다고 하지만, 아이노드는 할당되었다고 함
     + 파일 시스템 자료 구조들 간의 이러한 불일치로 파일 시스템 전체 일관성이 손상
     + 파일 시스템을 사용하기 위해 이 문제를 해결해야 함

4. 갱신된 비트맵(B[v2])만 디스크에 기록
   - 비트맵은 블록 5번이 할당되었다고 표시하지만 아이노드가 가리키고 있는 블록은 없음
   - 그러므로 파일 시스템의 일관성이 손상된 상태
   - 해결하지 않고 그대로 둔다면 블록 5번은 파일 시스템에서 사용될 수 없음

-----
### 크래시 시나리오 - 두 개의 쓰기가 성공하고 마지막 한 개의 쓰기는 실패
-----
1. 세 개의 블록을 디스크에 기록하는 시나리오에서 두 개의 쓰기가 성공하고 마지막 한 개의 쓰기는 실패한 경우
2. 데이터(Db)를 제외한 아이노드(I[v2])와 비트맵(B[v2])은 디스크에 기록
   - 파일 시스템 메타데이터 일관성은 보장
   - 아이노드의 포인터는 블록 5번을 가리키고, 비트맵은 5번을 사용 중임을 나타내므로 파일 시스템 메타데이터 관점에서는 괜찮음
   - 하지만, 5번 블록에는 의미 없는 값이 들어있음

3. 비트맵(B[v2])을 제외한 데이터(Db)와 아이노드(I[v2])는 디스크에 기록
   - 디스크의 데이터를 아이노드가 제대로 가리키고 있지만 이전 버전의 비트맵(B1)과 아이노드 간 내용이 일관성이 없음
   - 파일 시스템을 새로 시작하기 전 이 문제를 해결해야 함

4. 아이노드(I[v2])를 제외한 비트맵(B[v2])과 데이터(Db)는 디스크에 기록
   - 아이노드와 비트맵 간의 내용이 일치하지 않음
   - 블록이 기록되고 비트맵은 사용 중이라고 되어 있지만 아이노드가 파일을 가리키고 잇지 않으므로 해당 블록이 어느 파일에 속할 것인지 알 수 없음

-----
### 크래시 일관성 문제
-----
1. 크래시 때문에 파일 시스템 디스크 상 자료 구조에 많은 문제가 발생할 수 있음
2. 파일 시스템 자료 구조 간의 불일치가 있을 수 있고, 공간 누수가 발생할 수 있으며, 사용자에게 의미없는 데이터가 전달되는 등 여러 문제 발생 가능
3. 따라서, 파일 시스템의 일관성이 항상 유지되도록 만들어야함
4. 연산 이전의 상태에서 연산 이후의 상태로 이동할 때, 중간의 임시 상태(Transient State)로 파일 시스템이 남아 있는 경우를 방지하는 것이 목적
5. 불행하게도 디스크는 한 번에 하나의 쓰기 작업만 처리할 수 있으며, 이러한 작업들 중간에 크래시나 전력 손실이 발생할 수 있어서 목적을 쉽게 달성할 수 없음
   - 이러한 일반적인 문제를 크래시 일관성 문제 (일관된 갱신 문제)라고 부름
   
