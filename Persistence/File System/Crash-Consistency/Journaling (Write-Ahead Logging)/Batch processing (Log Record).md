-----
### 로그 기록을 일괄 처리 방식으로
-----
1. 데이터 저널링 방식은 디스크에 엄청나게 많은 트래픽 유발
2. 같은 디렉터리에서 두 개의 파일 file과 file2를 연속으로 생성했다고 가정
   - 파일을 하나 생성하려면 디스크 상의 여러 자료 구조를 갱신해야 함 : 최소한 아이노드 비트맵(새로운 아이노드 할당), 새롭게 생성된 파일의 아이노드, 새로운 디렉토리 항목을 포함하는 부모 디렉토리의 데이터 블록, 그리고 부모 디렉터리의 아이노드(새롭게 변경된 시간을 갖고 있음)가 갱신
   - 저널링을 사용하면 각 파일들에 대한 정보들이 모두 저널에 커밋하며, 두 파일이 같은 디렉터리 내 존재한다면 파일 아이노드들도 같은 아이노드 블럭에 존재할 가능성이 큼
   - 같은 블럭을 계쏙 반복해서 기록할 수 있음

3. 이런 상황 개선을 위해 어떤 파일 시스템은 각각 여러 개의 저널로그를 모아서 한 번에 디스크에 커밋하는 방법 사용 (Linux EXT3)
   - 로깅 해야 할 모든 파일 시스템 갱신 내용을 트랙잭션 버퍼라는 자료 구조에 보관 : 파일 시스템 파티션 마다 하나만 존재하는 전역 자료구조로, 저널 버퍼라고도 불림
   - 위 예제와 같이 두 개의 파일이 생성되는 경우 메모리에 존재하는 아이노드 비트맵, 파일들의 아이노드들, 디렉터리 데이터, 그리고 디렉터리 아이노드를 갱신됨(Dirty)으로 설정하고 해당 블럭들을 트랜잭션 버퍼 리스트에 추가
   - 트랜잭션 버퍼의 내용들은 파일 시스템이 저널을 커밋할 때 디스크에 기록되며, 파일 시스템은 메모리에 있는 갱신 내용들을 정기적으로(예) 5초, 이 간격을 저널 타임아웃이라 부르기도 함) 저널에 기록
   - 이 외에 fsync()나 sync() 함수가 호출되면, 해당 시점에 트랜잭션 버퍼의 내용들이 저널에 커밋
   - 저널에 기록되어야 할 블럭들을 버퍼링함으로써 많은 양의 쓰기 트래픽을 줄일 수 있음
