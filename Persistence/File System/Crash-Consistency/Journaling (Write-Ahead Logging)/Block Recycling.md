-----
### 블럭 재활용 
-----
1. 저널링에서 몇 가지 특수한 경우 : 블럭 재활용
2. 예제) 만약 메타데이터가 저널링을 사용한다고 가정하며, 데이터 블럭들은 저널링 하지 않는다고 가정
   - foo라는 디렉토리가 존재하며, 사용자는 foo라는 디렉터리에 파일을 생성하였으며, 디렉터리에 항목이 추가
   - foo의 데이터 블럭이 로그에 기록 (디렉터리는 메타데이터로 간주되기 때문임)
   - foo 디렉토리의 데이터 블럭은 1000번에 위치한다고 가정
   - 저널링이 완료되면 다음과 같은 정보를 가지게 됨
<div align="center">
<img src="https://github.com/user-attachments/assets/86a8fced-8fe2-403a-b71f-1f49f01b0b3a">
</div>

3. 이 시점에서 사용자가 디렉토리의 모든 파일을 디렉토리 자체와 함께 삭제
   - 블럭 1000번은 free 블럭이 되며, 사용자가 새로운 파일(foobar)을 생성
   - foo가 사용하던 삭제된 블럭 1000번을 할당받게 됨
   - 이 때, 1000번에 있었던 디렉터리 데이터 정보를 체크포인트하며, 복구 과정에서 사용자 데이터인 현재의 foobar 파일은 이전 디렉토리 정보도 덮어써지게 되어, 이전 값으로 복구가 됨
   - 사용자가 foobar를 읽으면 엉뚱한 값이 읽혀짐

4. 해결 방법 : 지워진 블럭이 체크포인트될 때까지 절대로 재사용하지 않는 것
   - Linux EXT3은 저널에 철회 레코드(Revoke Record)라는 새로운 항목을 추가하여, 디렉토리가 삭제되면 저널의 철회 레코드를 기록하도록 만듬
   - 저널을 재실행 시 시스템은 먼저 철회 레코드의 존재 여부를 먼저 탐색하고, 철회된 내용은 재실행을 하지 않는 식으로 위 문제를 회피
   
