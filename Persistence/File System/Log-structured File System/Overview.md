-----
### 로그 기반 파일 시스템
-----
1. 1990년대 초반 Berkeley 대학의 John Ousterhout 교수와 그의 대학원생 Mendel Ronsenblum이 로그 기반 파일 시스템(Log-structured File System)이라는 새로운 파일 시스템 개발
2. 관찰 결과
   - 메모리 크기가 증가 추세
     + 메모리 용량이 커지고 더 많은 데이터를 메모리에 캐시할 수 있게 되면서, 디스크 사용은 대체적으로 쓰기 위주가 되었고 캐시에서 처리
     + 따라서, 파일 시스템 성능이 쓰기 성능에 의해 결정

   - 임의 I/O와 순차 I/O의 성능 간 격차가 크게 벌어짐
     + 전송 대역폭은 매해 대략 50 ~ 100% 가량 개선되었지만, 탐색과 회전 비용은 매우 천천히 감소하여 연 5 ~ 10%씩 개선
     + 디스크를 순차적으로 사용할 수 있다면 상당한 성능 개선 효과 발생

   - 많은 일반적인 워크로드에서 기존 파일 시스템들의 성능이 좋지 않았음
     + 예를 들어, FFS는 블럭 하나 크기의 새로운 파일 생성을 위해 여러 번 쓰기를 해야 함 (새로운 아이노드에 한 번, 아이노드 비트맵에 한 번, 파일이 들어있는 디렉터리 데이터 블럭을 위해 한 번, 디렉토리 아이노드를 갱신하기 위해 샇 넙,ㄴ 새 파일의 부분이 될 데이터 블럭을 위해 한 번, 그리고 할당된 데이터 블럭을 표시하기 위해 데이터 비트맵을 씀)
     + FFS는 이 모든 블럭들을 같은 블럭 그룹 내 배치시킬 수 있지만, 여러 번 짧은 탐색과 연이은 회전 지연을 발생시키므로 최대 순차 대역폭이 낼 수 있는 성능에 한 참 못 미치는 성능을 보임

   - 파일 시스템이 RAID를 고려하지 않음
     + RAID-4와 RAID-5는 작은 크기의 쓰기(Small Write) 문제를 갖고 있으며, 하나의 블럭을 쓰더라도 실질적으로 4번의 물리적 I/O가 발생하는 문제 존재
     + 기존의 파일 시스템은 이러한 RAID에서 최악의 현상을 피하기 위해 노력하지 않음

3. 이상적인 파일 시스템은 쓰기 성능에 초점을 둠
   - 디스크의 순차 대역폭 성능을 최대한 활용하는 방향으로 설계되며, 데이터 기록 뿐 아니라 디스크 상 메타데이터 구조를 빈번하게 갱신하는 워크로드에서도 효율적으로 동작
   - 마지막으로, 단일 디스크 뿐만 아니라 RAID에서도 잘 동작
  
4. 로그 기반 파일 시스템(LFS)은 디스크 기록 시, 모든 갱신 정보를 (메타데이터 포함) 세그먼트라 불리는 메모리 자료구조에 보관
   - 세그먼트가 가득차면 디스크에서 빈 공간을 찾아 한 번에 기록
   - LFS는 기존 내용을 덮어쓰지 않고, 대신 항상 비어있는 곳에 세그먼트를 씀
   - 세그먼트가 크기 때문에 디스크 기록 작업이 효율적이 되며, 디스크 성능을 최대한 활용 가능
